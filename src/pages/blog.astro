---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import MainLayout from '../components/Layout.tsx';
import PageHero from '../components/PageHero.tsx';
import BlogFilter from '../components/BlogFilter.tsx';
import Breadcrumb from '../components/Breadcrumb.tsx';
import { Calendar, Clock, User, ArrowRight, Search, Tag, TrendingUp, BookOpen } from 'lucide-react';

export const prerender = true;

// Get all blog posts
const posts = await getCollection('blog');
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

// Get unique categories
const categories = [...new Set(posts.map(post => post.data.category))];
---

<Layout 
	title="Blog Hosting Chile - Tutoriales E-commerce & Softland ERP"
    description="Tutoriales de hosting en Chile: guías de e-commerce, manuales Softland ERP y optimización de sitios web. Contenido actualizado por especialistas."
	keywords="tutoriales hosting chile, guias ecommerce chile, manual softland erp, blog hosting chile, tutoriales tienda online chile"
	canonical="/blog"
>
	<MainLayout client:load>
		<!-- Breadcrumbs -->
		<div class="bg-gray-50 py-3">
			<div class="mx-auto max-w-7xl px-6 lg:px-8">
				<Breadcrumb 
					client:load
					items={[
						{ name: "Blog" }
					]}
				/>
			</div>
		</div>

		<PageHero 
			client:load
			title="Blog y Recursos" 
			subtitle="Artículos, tutoriales y noticias sobre hosting, e-commerce y tecnología empresarial"
		/>

		<!-- Blog Posts with Filter -->
		<BlogFilter 
			client:load 
			categories={categories} 
			posts={posts} 
		/>
	</MainLayout>
</Layout>

<style>
	.line-clamp-2 {
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
	.line-clamp-3 {
		display: -webkit-box;
		-webkit-line-clamp: 3;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}
</style>
